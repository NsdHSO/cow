import { Component } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "./util/service/driver.service";
import * as i3 from "ngx-liburg-icon";
import * as i4 from "@angular/common";
import * as i5 from "ngx-liburg";
export class DriverComponent {
    constructor(_activate, _driverService, _spinnerService) {
        this._activate = _activate;
        this._driverService = _driverService;
        this._spinnerService = _spinnerService;
    }
    ngOnInit() {
        this._driverService.driverData.subscribe(drivers => {
            this.isLoading = this._spinnerService.isLoading;
            this.dataSourceDrivers = drivers.map((driver, index) => {
                const model = driver;
                return {
                    actions: this._actionTableListDriver(),
                    editable: false,
                    model: {
                        ...model,
                    },
                };
            });
        });
    }
    changePage(event) {
        this._driverService.getDataDriver({ items: event.pageSize, page: event.pageIndex + 1 });
    }
    newEntry() {
        let emptyEntry = {};
        emptyEntry.editable = true;
        emptyEntry.actions = this._actionTableListDriver();
        emptyEntry.model = {};
        this.dataSourceDrivers = [...this.dataSourceDrivers, emptyEntry];
        console.log(this.dataSourceDrivers);
    }
    _actionTableListDriver() {
        return [
            {
                iconClass: "fa_solid:gauge",
                classCss: "edit",
                method: (row) => {
                    row.editable = !row.editable;
                    if (!row.editable) {
                        this._driverService.patchDataDriver(row.model)
                            .subscribe();
                    }
                },
            },
        ];
    }
}
DriverComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.3", ngImport: i0, type: DriverComponent, deps: [{ token: i1.ActivatedRoute }, { token: i2.DriverService }, { token: i3.SpinnerService }], target: i0.ɵɵFactoryTarget.Component });
DriverComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.3", type: DriverComponent, selector: "lib-driver", ngImport: i0, template: "<div class=\"driver-table-wrapper\" *ngIf=\"isLoading | async\">\n  <elix-table\n    [dataSource]=\"dataSourceDrivers\"\n    [showPagination]=\"true\"\n    [lenghtPagination]=\"dataSourceDrivers.length\"\n    (onPaginationChange)=\"changePage($event)\"\n    [addedNewEntry]=\"true\"\n    (onAddEntry)=\"newEntry()\"\n  >\n    <elix-column-text\n      className=\"fullName\"\n      [editRow]=\"true\"\n      field=\"name\"\n      name=\"Name\"\n    ></elix-column-text>\n    <elix-column-text\n      className=\"driverLicense\"\n      field=\"description\"\n      name=\"Driver License\"\n    ></elix-column-text>\n    <elix-column-two-cases\n      className=\"license\"\n      [editRow]=\"true\"\n      field=\"license\"\n      name=\"License\"\n    ></elix-column-two-cases>\n    <elix-column-icon-action\n      className=\"action\"\n      name=\"ACTION FIELD\"\n      field=\"action\"\n    ></elix-column-icon-action>\n  </elix-table>\n</div>\n\n<div *ngIf=\"!(isLoading | async)\">\n  <lib-spinner></lib-spinner>\n</div>\n", styles: [".driver-table-wrapper{box-shadow:#00000026 0 15px 25px,#0000000d 0 5px 10px}\n"], dependencies: [{ kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i5.TableComponent, selector: "elix-table", inputs: ["dataSource", "extensible", "extandble$", "footerShow", "footerMessageClass", "newElementExtandble", "showPagination", "lenghtPagination", "paginationClass", "addedNewEntry"], outputs: ["onAddEntry", "onPaginationChange"] }, { kind: "component", type: i5.ColumnTextComponent, selector: "elix-column-text", outputs: ["onValueChanges"] }, { kind: "component", type: i5.ColumnIconActionComponent, selector: "elix-column-icon-action" }, { kind: "component", type: i5.ColumnTwoCasesComponent, selector: "elix-column-two-cases", outputs: ["onValueChanges"] }, { kind: "component", type: i3.SpinnerComponent, selector: "lib-spinner" }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.3", ngImport: i0, type: DriverComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-driver', template: "<div class=\"driver-table-wrapper\" *ngIf=\"isLoading | async\">\n  <elix-table\n    [dataSource]=\"dataSourceDrivers\"\n    [showPagination]=\"true\"\n    [lenghtPagination]=\"dataSourceDrivers.length\"\n    (onPaginationChange)=\"changePage($event)\"\n    [addedNewEntry]=\"true\"\n    (onAddEntry)=\"newEntry()\"\n  >\n    <elix-column-text\n      className=\"fullName\"\n      [editRow]=\"true\"\n      field=\"name\"\n      name=\"Name\"\n    ></elix-column-text>\n    <elix-column-text\n      className=\"driverLicense\"\n      field=\"description\"\n      name=\"Driver License\"\n    ></elix-column-text>\n    <elix-column-two-cases\n      className=\"license\"\n      [editRow]=\"true\"\n      field=\"license\"\n      name=\"License\"\n    ></elix-column-two-cases>\n    <elix-column-icon-action\n      className=\"action\"\n      name=\"ACTION FIELD\"\n      field=\"action\"\n    ></elix-column-icon-action>\n  </elix-table>\n</div>\n\n<div *ngIf=\"!(isLoading | async)\">\n  <lib-spinner></lib-spinner>\n</div>\n", styles: [".driver-table-wrapper{box-shadow:#00000026 0 15px 25px,#0000000d 0 5px 10px}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ActivatedRoute }, { type: i2.DriverService }, { type: i3.SpinnerService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJpdmVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1kcml2ZXIvc3JjL2xpYi9kcml2ZXIvZHJpdmVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1kcml2ZXIvc3JjL2xpYi9kcml2ZXIvZHJpdmVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQVMsTUFBTSxlQUFlLENBQUM7Ozs7Ozs7QUFjaEQsTUFBTSxPQUFPLGVBQWU7SUFLMUIsWUFDbUIsU0FBMEIsRUFDMUIsY0FBOEIsRUFDOUIsZUFBZ0M7UUFGaEMsY0FBUyxHQUFULFNBQVMsQ0FBaUI7UUFDMUIsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQzlCLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtJQUMvQyxDQUFDO0lBRUwsUUFBUTtRQUNOLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNqRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFBO1lBQy9DLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUNsQyxDQUFDLE1BQWUsRUFBRSxLQUFjLEVBQUUsRUFBRTtnQkFDbEMsTUFBTSxLQUFLLEdBQVksTUFBTSxDQUFDO2dCQUM5QixPQUFPO29CQUNMLE9BQU8sRUFBRyxJQUFJLENBQUMsc0JBQXNCLEVBQUU7b0JBQ3ZDLFFBQVEsRUFBRSxLQUFLO29CQUNmLEtBQUssRUFBSzt3QkFDUixHQUFHLEtBQUs7cUJBQ1Q7aUJBQzhCLENBQUM7WUFDcEMsQ0FBQyxDQUNGLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSxVQUFVLENBQUMsS0FBaUI7UUFDakMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsRUFBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ3hGLENBQUM7SUFFTSxRQUFRO1FBQ2IsSUFBSSxVQUFVLEdBQVcsRUFBcUMsQ0FBQztRQUMvRCxVQUFVLENBQUMsUUFBUSxHQUFNLElBQUksQ0FBQztRQUM5QixVQUFVLENBQUMsT0FBTyxHQUFPLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBQ3ZELFVBQVUsQ0FBQyxLQUFLLEdBQVMsRUFBWSxDQUFDO1FBQ3RDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ2pFLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDdEMsQ0FBQztJQUVPLHNCQUFzQjtRQUM1QixPQUFPO1lBQ0w7Z0JBQ0UsU0FBUyxFQUFFLGdCQUFnQjtnQkFDM0IsUUFBUSxFQUFHLE1BQU07Z0JBQ2pCLE1BQU0sRUFBSyxDQUFDLEdBQXFDLEVBQUUsRUFBRTtvQkFDbkQsR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7b0JBQzdCLElBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFO3dCQUNoQixJQUFJLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDOzZCQUMzQyxTQUFTLEVBQUUsQ0FBQztxQkFDaEI7Z0JBQ0gsQ0FBQzthQUNGO1NBQ3lCLENBQUM7SUFDL0IsQ0FBQzs7NEdBeERVLGVBQWU7Z0dBQWYsZUFBZSxrRENkNUIsbWdDQXFDQTsyRkR2QmEsZUFBZTtrQkFMM0IsU0FBUzsrQkFDZ0IsWUFBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtQYWdlRXZlbnR9IGZyb20gXCJAYW5ndWxhci9tYXRlcmlhbC9wYWdpbmF0b3JcIjtcbmltcG9ydCB7QWN0aXZhdGVkUm91dGV9IGZyb20gXCJAYW5ndWxhci9yb3V0ZXJcIjtcbmltcG9ydCB7RGF0YVNvdXJjZU1hdGVyaWFsVGFibGUsIElBY3Rpb25NYXRlcmlhbENvbHVtbn0gZnJvbSAnbmd4LWxpYnVyZyc7XG5pbXBvcnQge1NwaW5uZXJTZXJ2aWNlfSBmcm9tICduZ3gtbGlidXJnLWljb24nO1xuaW1wb3J0IHtCZWhhdmlvclN1YmplY3R9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQge0RyaXZlcn0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7RHJpdmVyU2VydmljZX0gZnJvbSBcIi4vdXRpbC9zZXJ2aWNlL2RyaXZlci5zZXJ2aWNlXCI7XG5cbkBDb21wb25lbnQoe1xuICAgICAgICAgICAgIHNlbGVjdG9yICAgOiAnbGliLWRyaXZlcicsXG4gICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL2RyaXZlci5jb21wb25lbnQuaHRtbCcsXG4gICAgICAgICAgICAgc3R5bGVVcmxzICA6IFsnLi9kcml2ZXIuY29tcG9uZW50LnNjc3MnXSxcbiAgICAgICAgICAgfSlcbmV4cG9ydCBjbGFzcyBEcml2ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBwdWJsaWMgZGF0YVNvdXJjZURyaXZlcnMgOiBEcml2ZXJbXSB8IGFueTtcblxuICBwdWJsaWMgaXNMb2FkaW5nIDogQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+IHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2FjdGl2YXRlIDogQWN0aXZhdGVkUm91dGUsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZHJpdmVyU2VydmljZSA6IERyaXZlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3Bpbm5lclNlcnZpY2UgOiBTcGlubmVyU2VydmljZSxcbiAgKSB7IH1cblxuICBuZ09uSW5pdCgpIDogdm9pZCB7XG4gICAgdGhpcy5fZHJpdmVyU2VydmljZS5kcml2ZXJEYXRhLnN1YnNjcmliZShkcml2ZXJzID0+IHtcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdGhpcy5fc3Bpbm5lclNlcnZpY2UuaXNMb2FkaW5nXG4gICAgICB0aGlzLmRhdGFTb3VyY2VEcml2ZXJzID0gZHJpdmVycy5tYXAoXG4gICAgICAgIChkcml2ZXIgOiBEcml2ZXIsIGluZGV4IDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbW9kZWwgPSA8RHJpdmVyPiBkcml2ZXI7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFjdGlvbnMgOiB0aGlzLl9hY3Rpb25UYWJsZUxpc3REcml2ZXIoKSxcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIG1vZGVsICAgOiB7XG4gICAgICAgICAgICAgIC4uLm1vZGVsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9IGFzIERhdGFTb3VyY2VNYXRlcmlhbFRhYmxlPGFueT47XG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGNoYW5nZVBhZ2UoZXZlbnQgOiBQYWdlRXZlbnQpIDogdm9pZCB7XG4gICAgdGhpcy5fZHJpdmVyU2VydmljZS5nZXREYXRhRHJpdmVyKHtpdGVtczogZXZlbnQucGFnZVNpemUsIHBhZ2U6IGV2ZW50LnBhZ2VJbmRleCArIDF9KTtcbiAgfVxuXG4gIHB1YmxpYyBuZXdFbnRyeSgpIDogdm9pZCB7XG4gICAgbGV0IGVtcHR5RW50cnkgICAgICAgICA9IHt9IGFzIERhdGFTb3VyY2VNYXRlcmlhbFRhYmxlPERyaXZlcj47XG4gICAgZW1wdHlFbnRyeS5lZGl0YWJsZSAgICA9IHRydWU7XG4gICAgZW1wdHlFbnRyeS5hY3Rpb25zICAgICA9IHRoaXMuX2FjdGlvblRhYmxlTGlzdERyaXZlcigpO1xuICAgIGVtcHR5RW50cnkubW9kZWwgICAgICAgPSB7fSBhcyBEcml2ZXI7XG4gICAgdGhpcy5kYXRhU291cmNlRHJpdmVycyA9IFsuLi50aGlzLmRhdGFTb3VyY2VEcml2ZXJzLCBlbXB0eUVudHJ5XTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGFTb3VyY2VEcml2ZXJzKTtcbiAgfVxuXG4gIHByaXZhdGUgX2FjdGlvblRhYmxlTGlzdERyaXZlcigpIDogSUFjdGlvbk1hdGVyaWFsQ29sdW1uW10ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGljb25DbGFzczogXCJmYV9zb2xpZDpnYXVnZVwiLFxuICAgICAgICBjbGFzc0NzcyA6IFwiZWRpdFwiLFxuICAgICAgICBtZXRob2QgICA6IChyb3cgOiBEYXRhU291cmNlTWF0ZXJpYWxUYWJsZTxEcml2ZXI+KSA9PiB7XG4gICAgICAgICAgcm93LmVkaXRhYmxlID0gIXJvdy5lZGl0YWJsZTtcbiAgICAgICAgICBpZighcm93LmVkaXRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLl9kcml2ZXJTZXJ2aWNlLnBhdGNoRGF0YURyaXZlcihyb3cubW9kZWwpXG4gICAgICAgICAgICAgIC5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0gYXMgSUFjdGlvbk1hdGVyaWFsQ29sdW1uW107XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJkcml2ZXItdGFibGUtd3JhcHBlclwiICpuZ0lmPVwiaXNMb2FkaW5nIHwgYXN5bmNcIj5cbiAgPGVsaXgtdGFibGVcbiAgICBbZGF0YVNvdXJjZV09XCJkYXRhU291cmNlRHJpdmVyc1wiXG4gICAgW3Nob3dQYWdpbmF0aW9uXT1cInRydWVcIlxuICAgIFtsZW5naHRQYWdpbmF0aW9uXT1cImRhdGFTb3VyY2VEcml2ZXJzLmxlbmd0aFwiXG4gICAgKG9uUGFnaW5hdGlvbkNoYW5nZSk9XCJjaGFuZ2VQYWdlKCRldmVudClcIlxuICAgIFthZGRlZE5ld0VudHJ5XT1cInRydWVcIlxuICAgIChvbkFkZEVudHJ5KT1cIm5ld0VudHJ5KClcIlxuICA+XG4gICAgPGVsaXgtY29sdW1uLXRleHRcbiAgICAgIGNsYXNzTmFtZT1cImZ1bGxOYW1lXCJcbiAgICAgIFtlZGl0Um93XT1cInRydWVcIlxuICAgICAgZmllbGQ9XCJuYW1lXCJcbiAgICAgIG5hbWU9XCJOYW1lXCJcbiAgICA+PC9lbGl4LWNvbHVtbi10ZXh0PlxuICAgIDxlbGl4LWNvbHVtbi10ZXh0XG4gICAgICBjbGFzc05hbWU9XCJkcml2ZXJMaWNlbnNlXCJcbiAgICAgIGZpZWxkPVwiZGVzY3JpcHRpb25cIlxuICAgICAgbmFtZT1cIkRyaXZlciBMaWNlbnNlXCJcbiAgICA+PC9lbGl4LWNvbHVtbi10ZXh0PlxuICAgIDxlbGl4LWNvbHVtbi10d28tY2FzZXNcbiAgICAgIGNsYXNzTmFtZT1cImxpY2Vuc2VcIlxuICAgICAgW2VkaXRSb3ddPVwidHJ1ZVwiXG4gICAgICBmaWVsZD1cImxpY2Vuc2VcIlxuICAgICAgbmFtZT1cIkxpY2Vuc2VcIlxuICAgID48L2VsaXgtY29sdW1uLXR3by1jYXNlcz5cbiAgICA8ZWxpeC1jb2x1bW4taWNvbi1hY3Rpb25cbiAgICAgIGNsYXNzTmFtZT1cImFjdGlvblwiXG4gICAgICBuYW1lPVwiQUNUSU9OIEZJRUxEXCJcbiAgICAgIGZpZWxkPVwiYWN0aW9uXCJcbiAgICA+PC9lbGl4LWNvbHVtbi1pY29uLWFjdGlvbj5cbiAgPC9lbGl4LXRhYmxlPlxuPC9kaXY+XG5cbjxkaXYgKm5nSWY9XCIhKGlzTG9hZGluZyB8IGFzeW5jKVwiPlxuICA8bGliLXNwaW5uZXI+PC9saWItc3Bpbm5lcj5cbjwvZGl2PlxuIl19